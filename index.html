<!DOCTYPE html>
<html lang="tr">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>SoccerTR Geli≈ümi≈ü</title>
<style>
    /* Temel stil */
    body {
        margin:0; padding:0; font-family: Arial, sans-serif;
        background: #121212; color: #eee;
        display: flex; flex-direction: column; height: 100vh;
    }
    header {
        background: #1f1f1f; padding: 10px;
        text-align: center; font-size: 2rem;
        font-weight: bold; color:#f5a623;
    }
    nav {
        display: flex; background: #222;
        justify-content: space-around;
    }
    nav button {
        background: #333; border:none; color:#eee; padding:10px 15px;
        cursor:pointer; font-weight: bold;
        transition: background-color 0.3s, color 0.3s;
    }
    nav button.active {
        background: #f5a623; color:#121212;
    }
    main {
        flex:1; overflow-y:auto; padding: 15px;
        background: linear-gradient(45deg,#065f46,#2563eb);
        position: relative;
    }

    /* B√∂l√ºmler gizli */
    section {
        display:none;
        padding: 15px;
    }
    section.active {
        display:block;
    }

    /* Coin */
    #coinCount {
        font-size: 1.3rem; font-weight: bold;
        margin-bottom: 10px;
        color:#ffd700;
        text-shadow: 0 0 5px #ffd700;
        text-align: center;
    }

    /* Kadro b√∂l√ºm√º */
    .roster-container {
        display: flex; gap: 15px; flex-wrap: wrap;
        justify-content: center;
    }
    .roster-box {
        background: #333; padding: 15px;
        flex: 1; min-width: 280px; max-width: 350px;
        border-radius: 8px;
        max-height: 450px; overflow-y: auto;
        border: 1px solid #444;
        box-shadow: 0 4px 8px rgba(0,0,0,0.2);
    }
    .roster-box h3 {
        text-align: center; margin-bottom: 10px;
        color:#f5a623;
        border-bottom: 1px solid #f5a623;
        padding-bottom: 5px;
    }
    ul.player-list {
        list-style:none; padding:0; margin:0;
        min-height: 50px; /* S√ºr√ºkle bƒ±rak alanƒ± i√ßin */
    }
    ul.player-list li {
        background: #222; margin:5px 0; padding: 8px 10px;
        border-radius: 4px; cursor:grab; /* S√ºr√ºkleme imleci */
        display:flex; justify-content: space-between;
        align-items:center;
        transition: background-color 0.2s, transform 0.1s;
        border: 1px solid #333;
    }
    ul.player-list li:hover {
        background: #444;
    }
    ul.player-list li.dragging {
        opacity: 0.7;
        transform: scale(1.02);
    }
    .player-info {
        font-size: 0.9rem; color:#aaa;
    }
    button.small-btn {
        padding: 4px 8px; font-size: 0.8rem;
        cursor:pointer; border:none; background:#f5a623;
        color:#121212; border-radius: 4px;
        margin-left: 10px;
        transition: background-color 0.2s;
    }
    button.small-btn:hover:not(:disabled) {
        background:#e0941d;
    }
    button.small-btn:disabled {
        background:#999; cursor: not-allowed;
    }

    #increaseRosterBtn {
        display: block;
        width: fit-content;
        margin: 10px auto;
        padding: 8px 15px;
        font-size: 1rem;
    }

    /* Paket a√ßma animasyonu */
    #packAnim {
        position: absolute;
        top: 50%; left: 50%;
        transform: translate(-50%, -50%);
        background: rgba(0,0,0,0.85);
        padding: 30px 40px;
        border-radius: 10px;
        font-size: 1.8rem;
        font-weight: bold;
        color: #0ff;
        box-shadow: 0 0 20px rgba(0,255,255,0.7);
        display: none;
        text-align: center;
        z-index: 1000;
        border: 2px solid #0ff;
    }
    #packAnim .ball {
        width: 80px; height: 80px;
        border-radius: 50%;
        background: linear-gradient(45deg, #f5a623, #ffdd00);
        margin: 20px auto 15px;
        animation: dribble 1.5s infinite ease-in-out;
        box-shadow: 0 0 15px #f5a623;
    }
    @keyframes dribble {
        0% { transform: translateY(0) scale(1);}
        50% { transform: translateY(-30px) scale(1.1);}
        100% { transform: translateY(0) scale(1);}
    }

    /* Ma√ß alanƒ± */
    #matchArea {
        background: #0b6623;
        border: 3px solid #164d20;
        border-radius: 10px;
        position: relative;
        width: 100%;
        max-width: 700px; /* Alan geni≈üliƒüi artƒ±rƒ±ldƒ± */
        height: 400px;
        margin: 20px auto;
        overflow: hidden;
        box-shadow: inset 0 0 15px rgba(0,0,0,0.5);
    }
    .goal-line {
        position: absolute;
        top: 0;
        width: 20px; /* Kale derinliƒüi */
        height: 100%;
        background-color: rgba(255,255,255,0.1); /* G√∂rselle≈ütirme i√ßin */
        z-index: 1;
    }
    .goal-line-left { left: 0; }
    .goal-line-right { right: 0; }

    #player, #bot, #ball {
        position: absolute;
        width: 40px; height: 40px;
        border-radius: 50%;
        display: flex; align-items: center; justify-content: center;
        font-weight: bold; color: white;
        user-select: none;
        transition: left 0.05s linear, top 0.05s linear; /* Akƒ±cƒ± hareket */
    }
    #player {
        background: #2563eb; /* Mavi */
        left: 50px; top: 180px;
        z-index: 10;
    }
    #bot {
        background: #ef4444; /* Kƒ±rmƒ±zƒ± */
        right: 50px; top: 180px;
        z-index: 10;
    }
    #ball {
        background: #fbbf24; /* Sarƒ± */
        width: 25px; height: 25px; /* Top boyutu k√º√ß√ºlt√ºld√º */
        top: 187.5px; left: 337.5px; /* Ortaya hizalandƒ± */
        z-index: 8;
        border: 2px solid #a0522d;
    }
    /* Vuru≈ü g√ºc√º barƒ± */
    #powerBarContainer {
        position: absolute;
        bottom: 10px; left: 50%;
        transform: translateX(-50%);
        width: 300px; height: 20px;
        background: #222;
        border-radius: 10px;
        overflow: hidden;
        border: 1px solid #444;
    }
    #powerBar {
        height: 100%;
        width: 0;
        background: linear-gradient(90deg, #00ff00, #ff9900, #ff0000);
        transition: width 0.1s;
    }

    /* Joystick container */
    #joystickContainer {
        position: absolute;
        bottom: 40px; left: 20px;
        width: 120px; height: 120px;
        background: rgba(255,255,255,0.1);
        border-radius: 50%;
        touch-action: none;
        user-select: none;
        display: none; /* Varsayƒ±lan olarak gizli, mobil i√ßin a√ßƒ±lƒ±r */
    }
    #joystick {
        position: absolute;
        width: 60px; height: 60px;
        background: #f5a623;
        border-radius: 50%;
        top: 30px; left: 30px;
        touch-action: none;
        user-select: none;
        box-shadow: 0 0 10px rgba(245,166,35,0.5);
    }
    /* Vur tu≈üu mobil */
    #kickBtn {
        position: absolute;
        bottom: 60px; right: 40px;
        width: 80px; height: 80px;
        background: #f59e0b;
        border-radius: 50%;
        font-size: 1.5rem;
        font-weight: bold;
        color: #121212;
        display: none; /* Varsayƒ±lan olarak gizli, mobil i√ßin a√ßƒ±lƒ±r */
        user-select: none;
        border: none;
        box-shadow: 0 0 15px rgba(245,158,11,0.7);
        cursor: pointer;
    }

    #matchInfo {
        text-align: center;
        margin-top: 10px;
        font-size: 1.2rem;
        font-weight: bold;
        color: #fff;
    }
    #scoreDisplay {
        font-size: 1.5rem;
        color: #f5a623;
        margin-bottom: 5px;
    }
    #timerDisplay {
        font-size: 1.2rem;
        color: #eee;
    }

    #matchOptions {
        text-align: center;
        margin-bottom: 20px;
        display: flex;
        flex-direction: column;
        align-items: center;
        gap: 10px;
    }
    #matchOptions button {
        padding: 10px 20px;
        font-size: 1.1rem;
        background-color: #f5a623;
        color: #121212;
        border: none;
        border-radius: 5px;
        cursor: pointer;
        transition: background-color 0.2s;
    }
    #matchOptions button:hover {
        background-color: #e0941d;
    }

    #restartMatchBtn {
        display: block;
        margin: 20px auto 0;
        padding: 10px 20px;
        font-size: 1rem;
        background-color: #f5a623;
        color: #121212;
        border: none;
        border-radius: 5px;
        cursor: pointer;
        transition: background-color 0.2s;
        display: none; /* Ma√ß bittiƒüinde g√∂r√ºn√ºr */
    }
    #restartMatchBtn:hover {
        background-color: #e0941d;
    }

    /* Responsive */
    @media (max-width: 600px) {
        nav button {
            font-size: 0.8rem;
            padding: 8px 6px;
        }
        #joystickContainer, #kickBtn {
            display: block;
        }
        .roster-box {
            min-width: unset;
            width: 100%;
            max-width: unset;
        }
        .roster-container {
            flex-direction: column;
            align-items: center;
        }
        #matchArea {
            height: 300px;
            max-width: 95%;
        }
        #player, #bot {
            width: 30px; height: 30px;
            font-size: 0.8rem;
        }
        #ball {
            width: 20px; height: 20px;
        }
        #joystickContainer {
            width: 100px; height: 100px;
            bottom: 20px; left: 10px;
        }
        #joystick {
            width: 50px; height: 50px;
            top: 25px; left: 25px;
        }
        #kickBtn {
            width: 70px; height: 70px;
            font-size: 1.2rem;
            bottom: 30px; right: 20px;
        }
        #powerBarContainer {
            width: 200px; height: 15px;
            bottom: 5px;
        }
        #matchInfo {
            font-size: 1rem;
        }
        #scoreDisplay {
            font-size: 1.3rem;
        }
        #timerDisplay {
            font-size: 1rem;
        }
    }
</style>
</head>
<body>

<header>SoccerTR</header>
<nav>
    <button id="btnRoster" class="active">Kadro</button>
    <button id="btnPack">Paket A√ß</button>
    <button id="btnTraining">Antrenman</button>
    <button id="btnMatch">Ma√ß</button>
    <button id="btnSettings">Ayarlar</button>
</nav>

<main>
    <div id="coinCount">Coin: 100</div>

    <section id="rosterSection" class="active">
        <button id="increaseRosterBtn" class="small-btn">Kadro Dƒ±≈üƒ±nƒ± +100 (100 Coin)</button>
        <div class="roster-container">
            <div class="roster-box">
                <h3>ƒ∞lk 11 (<span id="first11Count">0</span>/11)</h3>
                <ul id="first11" class="player-list" data-list="first11"></ul>
            </div>
            <div class="roster-box">
                <h3>Yedek (<span id="substitutesCount">0</span>/11)</h3>
                <ul id="substitutes" class="player-list" data-list="substitutes"></ul>
            </div>
            <div class="roster-box">
                <h3>Kadro Dƒ±≈üƒ± (<span id="rosterOutCount">0</span>/<span id="rosterLimitCount">500</span>)</h3>
                <ul id="rosterOut" class="player-list" data-list="rosterOut"></ul>
            </div>
        </div>
    </section>

    <section id="packSection">
        <h2>Paket A√ß</h2>
        <p>100 Coin kar≈üƒ±lƒ±ƒüƒ±nda rastgele bir ligden oyuncu kazan!</p>
        <label for="leagueSelect">Lig Se√ß:</label>
        <select id="leagueSelect">
            <option value="">Lig se√ßiniz...</option>
            <option value="mls">MLS</option>
            <option value="premier">Premier Lig</option>
            <option value="bundesliga">Bundesliga</option>
            <option value="laliga">La Liga</option>
            <option value="ligue1">Ligue 1</option>
            <option value="seriea">Serie A</option>
            <option value="superlig">S√ºper Lig</option>
            <option value="saudiprolig">Suudi Pro Lig</option>
        </select>
        <button id="openPackBtn" disabled>Paket A√ß (100 Coin)</button>
        <div id="packAnim">
            <div class="ball"></div>
            <div id="packAnimText"></div>
        </div>
    </section>

    <section id="trainingSection">
        <h2>Antrenman</h2>
        <p>Oyuncularƒ±nƒ±zƒ± geli≈ütirerek ratinglerini artƒ±rƒ±n.</p>
        <label for="trainSelect">Oyuncu Se√ß:</label>
        <select id="trainSelect">
            <option value="">Oyuncu se√ßiniz...</option>
        </select>
        <div style="margin-top: 10px;">
            <button id="normalTrainBtn" disabled>Normal Antrenman (√úcretsiz)</button>
            <button id="playerTrainBtn" disabled>Oyuncu Antrenmanƒ± (√úcretsiz)</button>
        </div>
        <div id="trainMsg" style="margin-top:10px; font-weight:bold;"></div>
    </section>

    <section id="matchSection">
        <h2>Ma√ß</h2>
        <div id="matchOptions">
            <button id="start1v1MatchBtn">1 vs 1 Ma√ß Ba≈ülat</button>
            <button id="start11v11MatchBtn">11 vs 11 Ma√ß Ba≈ülat</button>
        </div>

        <div id="matchInfo" style="display:none;">
            <div id="scoreDisplay">Senin Takƒ±mƒ±n 0 - 0 Bot Takƒ±mƒ±</div>
            <div id="timerDisplay">S√ºre: 02:00</div>
            <div id="matchMsg" style="margin-top:5px;"></div>
        </div>

        <div id="matchArea" style="display:none;">
            <div class="goal-line goal-line-left"></div>
            <div class="goal-line goal-line-right"></div>
            <div id="player">P</div>
            <div id="bot">B</div>
            <div id="ball"></div>
            <div id="joystickContainer">
                <div id="joystick"></div>
            </div>
            <button id="kickBtn">VUR</button>
            <div id="powerBarContainer">
                <div id="powerBar"></div>
            </div>
        </div>
        <button id="restartMatchBtn">Ma√ßƒ± Yeniden Ba≈ülat</button>
    </section>

    <section id="settingsSection">
        <h2>Ayarlar</h2>
        <label for="languageSelect">Dil Se√ßimi:</label>
        <select id="languageSelect">
            <option value="tr">T√ºrk√ße</option>
            <option value="en">English</option>
            <option value="es">Espa√±ol</option>
            <option value="de">Deutsch</option>
            <option value="ru">–†—É—Å—Å–∫–∏–π</option>
            <option value="pt">Portugu√™s</option>
        </select>
        <br/><br/>
        <label>Tema:</label><br/>
        <input type="radio" id="themeDefault" name="theme" value="default" checked><label for="themeDefault">Varsayƒ±lan</label><br/>
        <input type="radio" id="themeDark" name="theme" value="dark"><label for="themeDark">Koyu</label><br/>
        <input type="radio" id="themeLight" name="theme" value="light"><label for="themeLight">A√ßƒ±k</label>
    </section>
</main>

<script>
(() => {
    // Oyuncu √∂rnek verisi (ger√ßek oyuncu isimleri ve ligler)
    const ligPaketleri = {
        mls: ["Zlatan Ibrahimovic", "Josef Mart√≠nez", "Gyasi Zardes", "Carlos Vela", "Alejandro Pozuelo", "Darlington Nagbe", "Diego Rossi", "Chicharito", "Gonzalo Higua√≠n", "Wayne Rooney"],
        premier: ["Mohamed Salah", "Harry Kane", "Kevin De Bruyne", "Sadio Man√©", "Bruno Fernandes", "Raheem Sterling", "Jamie Vardy", "Heung-Min Son", "Erling Haaland", "Bukayo Saka"],
        bundesliga: ["Robert Lewandowski", "Erling Haaland", "Thomas M√ºller", "Jude Bellingham", "Leon Goretzka", "Serge Gnabry", "Leroy San√©", "Joshua Kimmich", "Manuel Neuer", "Christopher Nkunku"],
        laliga: ["Lionel Messi", "Karim Benzema", "Luis Su√°rez", "Gerard Piqu√©", "Frenkie de Jong", "Antoine Griezmann", "Sergio Ramos", "Luka Modriƒá", "Vinicius Jr", "Federico Valverde"],
        ligue1: ["Kylian Mbapp√©", "Neymar Jr", "Angel Di Mar√≠a", "Marco Verratti", "Mauro Icardi", "Achraf Hakimi", "Layvin Kurzawa", "Gianluigi Donnarumma", "Presnel Kimpembe", "Marquinhos"],
        seriea: ["Cristiano Ronaldo", "Paulo Dybala", "Zlatan Ibrahimovic", "Romelu Lukaku", "Ciro Immobile", "Federico Chiesa", "Dries Mertens", "Lautaro Mart√≠nez", "Victor Osimhen", "Rafael Le√£o"],
        superlig: ["Burak Yƒ±lmaz", "Hakan √áalhanoƒülu", "Yunus Akg√ºn", "Cengiz √únder", "Okay Yoku≈ülu", "ƒ∞rfan Can Kahveci", "Ozan Kabak", "Uƒüurcan √áakƒ±r", "Abd√ºlkerim Bardakcƒ±", "Kerem Akt√ºrkoƒülu"],
        saudiprolig: ["Baf√©timbi Gomis", "Nordin Amrabat", "Salem Al-Dawsari", "Ever Banega", "Abderrazak Hamdallah", "Yasser Al-Shahrani", "Nawaf Al-Abed", "Odion Ighalo", "Talisca", "Cristiano Ronaldo"] // Ronaldo burada da olabilir
    };

    let coin = 500; // Ba≈ülangƒ±√ß coini artƒ±rƒ±ldƒ±
    let rosterLimit = 500; // Kadro dƒ±≈üƒ± limit ba≈ülangƒ±√ß

    let players = []; // T√ºm oyuncular kadro dƒ±≈üƒ± dahil
    let first11 = [];
    let substitutes = [];
    let rosterOut = [];

    // IDs i√ßin otomatik artan
    let nextId = 1;

    // DOM elemanlarƒ±
    const coinCountEl = document.getElementById("coinCount");
    const btnRoster = document.getElementById("btnRoster");
    const btnPack = document.getElementById("btnPack");
    const btnTraining = document.getElementById("btnTraining");
    const btnMatch = document.getElementById("btnMatch");
    const btnSettings = document.getElementById("btnSettings");

    const rosterSection = document.getElementById("rosterSection");
    const packSection = document.getElementById("packSection");
    const trainingSection = document.getElementById("trainingSection");
    const matchSection = document.getElementById("matchSection");
    const settingsSection = document.getElementById("settingsSection");

    const first11List = document.getElementById("first11");
    const first11CountEl = document.getElementById("first11Count");
    const subsList = document.getElementById("substitutes");
    const substitutesCountEl = document.getElementById("substitutesCount");
    const rosterOutList = document.getElementById("rosterOut");
    const rosterOutCountEl = document.getElementById("rosterOutCount");
    const rosterLimitCountEl = document.getElementById("rosterLimitCount");
    const increaseRosterBtn = document.getElementById("increaseRosterBtn");

    const leagueSelect = document.getElementById("leagueSelect");
    const openPackBtn = document.getElementById("openPackBtn");
    const packAnim = document.getElementById("packAnim");
    const packAnimText = document.getElementById("packAnimText");

    const trainSelect = document.getElementById("trainSelect");
    const normalTrainBtn = document.getElementById("normalTrainBtn");
    const playerTrainBtn = document.getElementById("playerTrainBtn");
    const trainMsg = document.getElementById("trainMsg");

    const matchOptions = document.getElementById("matchOptions");
    const start1v1MatchBtn = document.getElementById("start1v1MatchBtn");
    const start11v11MatchBtn = document.getElementById("start11v11MatchBtn");
    const matchInfo = document.getElementById("matchInfo");
    const scoreDisplay = document.getElementById("scoreDisplay");
    const timerDisplay = document.getElementById("timerDisplay");
    const matchArea = document.getElementById("matchArea");
    const playerEl = document.getElementById("player");
    const botEl = document.getElementById("bot");
    const ballEl = document.getElementById("ball");
    const joystickContainer = document.getElementById("joystickContainer");
    const joystick = document.getElementById("joystick");
    const kickBtn = document.getElementById("kickBtn");
    const powerBar = document.getElementById("powerBar");
    const matchMsg = document.getElementById("matchMsg");
    const restartMatchBtn = document.getElementById("restartMatchBtn");

    const languageSelect = document.getElementById("languageSelect");
    const themeRadios = document.querySelectorAll('input[name="theme"]');

    // Men√º ge√ßi≈ü fonksiyonu
    function showSection(section) {
        [rosterSection, packSection, trainingSection, matchSection, settingsSection].forEach(s => s.classList.remove("active"));
        [btnRoster, btnPack, btnTraining, btnMatch, btnSettings].forEach(b => b.classList.remove("active"));

        matchArea.style.display = 'none'; // Ma√ß alanƒ±nƒ± gizle
        matchInfo.style.display = 'none'; // Ma√ß bilgilerini gizle
        matchOptions.style.display = 'flex'; // Ma√ß se√ßeneklerini g√∂ster
        restartMatchBtn.style.display = 'none'; // Yeniden ba≈ülat butonunu gizle
        endMatch(); // Ma√ß aktifse bitir

        if(section==="roster"){ rosterSection.classList.add("active"); btnRoster.classList.add("active"); }
        else if(section==="pack"){ packSection.classList.add("active"); btnPack.classList.add("active"); }
        else if(section==="training"){ trainingSection.classList.add("active"); btnTraining.classList.add("active"); }
        else if(section==="match"){ matchSection.classList.add("active"); btnMatch.classList.add("active"); }
        else if(section==="settings"){ settingsSection.classList.add("active"); btnSettings.classList.add("active"); }
    }

    btnRoster.onclick = () => showSection('roster');
    btnPack.onclick = () => showSection('pack');
    btnTraining.onclick = () => showSection('training');
    btnMatch.onclick = () => showSection('match');
    btnSettings.onclick = () => showSection('settings');

    // Coin g√ºncelle
    function updateCoin() {
        coinCountEl.textContent = `Coin: ${coin}`;
    }

    // Kadro listelerini g√ºncelle
    function updateRosterLists() {
        first11List.innerHTML = "";
        substitutes.innerHTML = ""; // subsList doƒüru, fakat html'de id="substitutes" tanƒ±mlƒ±.
        rosterOutList.innerHTML = "";

        // First11'deki oyuncularƒ± doldur
        first11.forEach(player => first11List.appendChild(createPlayerLi(player)));
        // Yedeklerdeki oyuncularƒ± doldur
        substitutes.forEach(player => subsList.appendChild(createPlayerLi(player)));
        // Kadro dƒ±≈üƒ±ndaki oyuncularƒ± doldur
        rosterOut.forEach(player => rosterOutList.appendChild(createPlayerLi(player)));

        first11CountEl.textContent = first11.length;
        substitutesCountEl.textContent = substitutes.length;
        rosterOutCountEl.textContent = rosterOut.length;
        rosterLimitCountEl.textContent = rosterLimit;

        updateTrainingSelect(); // Antrenman selectbox'ƒ±nƒ± da g√ºncelle
    }

    function createPlayerLi(player) {
        const li = document.createElement("li");
        li.className = "player-item";
        li.textContent = `${player.name} | Rating: ${player.rating} | Gol: ${player.goals} | Asist: ${player.assists}`;
        li.draggable = true; // S√ºr√ºklenebilir yap
        li.dataset.playerId = player.id; // Oyuncu ID'sini sakla

        return li;
    }

    // Kadro listeleri i√ßin s√ºr√ºkle-bƒ±rak i≈ülevselliƒüi
    let draggedPlayerId = null;

    document.querySelectorAll('.player-list').forEach(list => {
        list.addEventListener('dragstart', (e) => {
            draggedPlayerId = parseInt(e.target.dataset.playerId);
            e.target.classList.add('dragging');
        });

        list.addEventListener('dragover', (e) => {
            e.preventDefault(); // Bƒ±rakmaya izin ver
        });

        list.addEventListener('dragleave', (e) => {
            e.preventDefault();
        });

        list.addEventListener('drop', (e) => {
            e.preventDefault();
            const targetListId = e.currentTarget.dataset.list;
            
            const player = players.find(p => p.id === draggedPlayerId);
            if (!player) return;

            // Oyuncuyu mevcut konumundan √ßƒ±kar
            first11 = first11.filter(p => p.id !== player.id);
            substitutes = substitutes.filter(p => p.id !== player.id);
            rosterOut = rosterOut.filter(p => p.id !== player.id);

            // Yeni listeye ekle
            if (targetListId === 'first11') {
                if (first11.length < 11) {
                    first11.push(player);
                } else {
                    alert("ƒ∞lk 11 dolu! Bir oyuncu √ßƒ±karmalƒ±sƒ±n.");
                    // Geri ekle
                    updateRosterLists();
                    return;
                }
            } else if (targetListId === 'substitutes') {
                 if (substitutes.length < 11) {
                    substitutes.push(player);
                } else {
                    alert("Yedekler dolu! Bir oyuncu √ßƒ±karmalƒ±sƒ±n.");
                     // Geri ekle
                    updateRosterLists();
                    return;
                }
            } else if (targetListId === 'rosterOut') {
                if (rosterOut.length < rosterLimit) {
                    rosterOut.push(player);
                } else {
                    alert("Kadro dƒ±≈üƒ± limiti dolu! Limiti artƒ±rƒ±n veya bir oyuncu silin.");
                     // Geri ekle
                    updateRosterLists();
                    return;
                }
            }
            updateRosterLists();
        });

        list.addEventListener('dragend', (e) => {
            e.target.classList.remove('dragging');
            draggedPlayerId = null;
        });
    });

    // Kadro dƒ±≈üƒ± arttƒ±rma
    increaseRosterBtn.onclick = () => {
        if(coin < 100) {
            alert("Yeterli coin yok!");
            return;
        }
        rosterLimit += 100;
        coin -= 100;
        updateCoin();
        updateRosterLists();
        alert(`Kadro dƒ±≈üƒ± limiti +100 oldu: ${rosterLimit}`);
    };

    // Paket a√ßma butonu durumu
    leagueSelect.onchange = () => {
        openPackBtn.disabled = leagueSelect.value === "";
        packAnim.style.display = "none";
    };

    // Paket a√ßma animasyonu
    function showPackAnimation(playerName) {
        packAnimText.textContent = `${playerName} oyuncusu kazandƒ±nƒ±z!`;
        packAnim.style.display = "block";
        packAnim.classList.add('active'); // Animasyon i√ßin sƒ±nƒ±f ekle

        setTimeout(() => {
            packAnim.style.display = "none";
            packAnim.classList.remove('active');
        }, 3500); // Animasyon s√ºresi
    }

    // Paket a√ßma
    openPackBtn.onclick = () => {
        if(coin < 100) {
            alert("Yeterli coin yok!");
            return;
        }
        const lig = leagueSelect.value;
        const pool = ligPaketleri[lig];
        if(!pool) return;

        // Halihazƒ±rda sahip olunan oyuncularƒ± √ßƒ±kar (sadece rosterOut i√ßindekiler deƒüil, t√ºm players i√ßinde)
        const available = pool.filter(name => !players.some(p => p.name === name));
        if(available.length === 0) {
            alert("Bu ligde t√ºm oyuncular sizde var!");
            return;
        }
        
        // Kadro dƒ±≈üƒ± limit kontrol√º
        if(rosterOut.length >= rosterLimit) {
            alert("Kadro dƒ±≈üƒ± limiti dolu. L√ºtfen kadro dƒ±≈üƒ±nƒ± arttƒ±rƒ±n (Ayarlar kƒ±smƒ±ndan deƒüil, Kadro b√∂l√ºm√ºnde).");
            return;
        }

        coin -= 100;
        updateCoin();

        // Rastgele oyuncu se√ßimi
        const selectedName = available[Math.floor(Math.random() * available.length)];
        const newPlayer = {
            id: nextId++,
            name: selectedName,
            rating: Math.floor(Math.random() * 20) + 70, // 70-89 arasƒ±
            goals: 0,
            assists: 0
        };

        players.push(newPlayer);
        rosterOut.push(newPlayer); // Yeni oyuncuyu otomatik kadro dƒ±≈üƒ±na ekle

        showPackAnimation(selectedName);

        setTimeout(() => {
            updateRosterLists();
        }, 3500); // Animasyon bitince listeyi g√ºncelle
    };

    // Antrenman se√ßimi g√ºncelle
    function updateTrainingSelect() {
        trainSelect.innerHTML = '<option value="">Oyuncu se√ßiniz...</option>';
        players.forEach(p => {
            const option = document.createElement("option");
            option.value = p.id;
            option.textContent = `${p.name} (Rating: ${p.rating})`;
            trainSelect.appendChild(option);
        });
        normalTrainBtn.disabled = true;
        playerTrainBtn.disabled = true;
        trainMsg.textContent = "";
    }

    trainSelect.onchange = () => {
        normalTrainBtn.disabled = !trainSelect.value;
        playerTrainBtn.disabled = !trainSelect.value;
        trainMsg.textContent = "";
    };

    // Normal antrenman √ºcretsiz
    normalTrainBtn.onclick = () => {
        const pid = parseInt(trainSelect.value);
        const player = players.find(p => p.id === pid);
        if(!player) return;
        if (player.rating >= 100) {
            trainMsg.style.color = "yellow";
            trainMsg.textContent = `${player.name} zaten en y√ºksek rating'de!`;
            return;
        }
        const inc = Math.floor(Math.random() * 3) + 1; // 1-3 artƒ±≈ü
        player.rating = Math.min(100, player.rating + inc);
        trainMsg.style.color = "lightgreen";
        trainMsg.textContent = `${player.name} normal antrenmanla +${inc} rating kazandƒ±! ≈ûimdi: ${player.rating}`;
        updateRosterLists();
        updateTrainingSelect();
    };

    // Oyuncu antrenmanƒ± √ºcretsiz
    playerTrainBtn.onclick = () => {
        const pid = parseInt(trainSelect.value);
        const player = players.find(p => p.id === pid);
        if(!player) return;
        if (player.rating >= 100) {
            trainMsg.style.color = "yellow";
            trainMsg.textContent = `${player.name} zaten en y√ºksek rating'de!`;
            return;
        }
        const inc = Math.floor(Math.random() * 5) + 2; // 2-6 artƒ±≈ü
        player.rating = Math.min(100, player.rating + inc);

        // %30 gol, %20 asist ≈üansƒ±
        let msg = `${player.name} oyuncu antrenmanƒ±nda +${inc} rating aldƒ±! ≈ûimdi: ${player.rating}`;
        const rand = Math.random();
        if(rand < 0.3) {
            player.goals++;
            msg += " ‚öΩ Gol attƒ±!";
        } else if(rand < 0.5) { // %20 ≈üans (0.3 ile 0.5 arasƒ±)
            player.assists++;
            msg += " üÖ∞Ô∏è Asist yaptƒ±!";
        }
        trainMsg.style.color = "orange";
        trainMsg.textContent = msg;
        updateRosterLists();
        updateTrainingSelect();
    };

    // Ma√ß modu deƒüi≈ükenleri
    let matchActive = false;
    let playerPos = {x:0, y:0};
    let botPos = {x:0, y:0};
    let ballPos = {x:0, y:0};
    let ballVelocity = {x:0, y:0}; // Topun hƒ±zƒ± ve y√∂n√º
    const ballSpeedFactor = 5; // Topun maksimum hƒ±zƒ±
    const playerSpeed = 3; // Oyuncu hƒ±zƒ±
    const botSpeed = 2.5; // Bot hƒ±zƒ± (biraz daha yava≈ü)
    let keysPressed = {};
    let power = 0;
    let powerIncreasing = false;

    let playerScore = 0;
    let botScore = 0;
    let matchTime = 120; // 2 dakika (saniye cinsinden)
    let matchInterval = null; // setInterval id'si
    let currentMatchMode = '1v1'; // Ba≈ülangƒ±√ßta 1v1

    // Ma√ß alanƒ±nƒ±n boyutlarƒ± dinamik olarak alƒ±nacak
    let matchAreaWidth = 0;
    let matchAreaHeight = 0;
    let playerWidth = 0;
    let ballWidth = 0;

    // Vuru≈ü g√º√ß barƒ± g√ºncelle
    function updatePowerBar() {
        powerBar.style.width = power + "%";
    }

    // Skor ekranƒ±nƒ± g√ºncelle
    function updateScoreDisplay() {
        scoreDisplay.textContent = `Senin Takƒ±mƒ±n ${playerScore} - ${botScore} Bot Takƒ±mƒ±`;
    }

    // Zamanlayƒ±cƒ±yƒ± g√ºncelle
    function updateTimerDisplay() {
        const minutes = Math.floor(matchTime / 60).toString().padStart(2, '0');
        const seconds = (matchTime % 60).toString().padStart(2, '0');
        timerDisplay.textContent = `S√ºre: ${minutes}:${seconds}`;
    }

    // Topu orta sahaya sƒ±fƒ±rla
    function resetBall() {
        ballPos = {
            x: matchAreaWidth / 2 - ballWidth / 2,
            y: matchAreaHeight / 2 - ballWidth / 2
        };
        ballVelocity = {x:0, y:0}; // Topun hƒ±zƒ±nƒ± sƒ±fƒ±rla
        updatePositions();
        matchMsg.textContent = "Ma√ßa devam!";
    }

    // Gol kontrol√º
    function checkGoal() {
        // Sol kale (Botun kalesi)
        if (ballPos.x <= 0 && ballPos.y > (matchAreaHeight/2 - 50) && ballPos.y < (matchAreaHeight/2 + 50)) { // Basit kale alanƒ± kontrol√º
            playerScore++;
            updateScoreDisplay();
            matchMsg.textContent = "GOOOL! üéâ";
            // Gol atan oyuncuya +1 gol ekle (rastgele ilk11 oyuncusu)
            if (currentMatchMode === '11v11' && first11.length > 0) {
                const scorer = first11[Math.floor(Math.random()*first11.length)];
                scorer.goals++;
                updateRosterLists();
            }
            setTimeout(resetBall, 1000); // 1 saniye sonra topu sƒ±fƒ±rla
            return true;
        }
        // Saƒü kale (Senin kalen)
        if (ballPos.x + ballWidth >= matchAreaWidth && ballPos.y > (matchAreaHeight/2 - 50) && ballPos.y < (matchAreaHeight/2 + 50)) {
            botScore++;
            updateScoreDisplay();
            matchMsg.textContent = "GOL YEDƒ∞N! üò©";
            setTimeout(resetBall, 1000); // 1 saniye sonra topu sƒ±fƒ±rla
            return true;
        }
        return false;
    }

    // Ma√ß ba≈ülat
    function startMatch(mode) {
        if (mode === '11v11' && first11.length < 11) {
            alert("11 vs 11 ma√ß i√ßin ƒ∞lk 11'de 11 oyuncun olmalƒ±!");
            return;
        }

        currentMatchMode = mode;
        matchActive = true;
        playerScore = 0;
        botScore = 0;
        matchTime = 120; // 2 dakika
        updateScoreDisplay();
        updateTimerDisplay();
        matchMsg.textContent = "Ma√ß ba≈üladƒ±!";
        
        matchOptions.style.display = 'none'; // Ma√ß se√ßeneklerini gizle
        matchArea.style.display = 'block'; // Ma√ß alanƒ±nƒ± g√∂ster
        matchInfo.style.display = 'block'; // Ma√ß bilgilerini g√∂ster
        restartMatchBtn.style.display = 'none'; // Ba≈ülangƒ±√ßta yeniden ba≈ülat gizli

        matchAreaWidth = matchArea.clientWidth;
        matchAreaHeight = matchArea.clientHeight;
        playerWidth = playerEl.clientWidth;
        ballWidth = ballEl.clientWidth;

        // Ba≈ülangƒ±√ß pozisyonlarƒ±
        playerPos = {x: 100, y: matchAreaHeight / 2 - playerWidth / 2};
        botPos = {x: matchAreaWidth - 100 - playerWidth, y: matchAreaHeight / 2 - playerWidth / 2};
        resetBall(); // Topu ortaya sƒ±fƒ±rla

        // Zamanlayƒ±cƒ±yƒ± ba≈ülat
        clearInterval(matchInterval);
        matchInterval = setInterval(() => {
            matchTime--;
            updateTimerDisplay();
            if (matchTime <= 0) {
                endMatch();
            }
        }, 1000);

        // PC i√ßin klavye dinle
        window.addEventListener("keydown", keyDownHandler);
        window.addEventListener("keyup", keyUpHandler);

        // Oyun d√∂ng√ºlerini ba≈ülat (bir kez √ßaƒürƒ±lacak)
        if (!gameLoopActive) {
            startGameLoops();
            gameLoopActive = true;
        }
    }

    start1v1MatchBtn.onclick = () => startMatch('1v1');
    start11v11MatchBtn.onclick = () => startMatch('11v11');
    restartMatchBtn.onclick = () => {
        showSection('match'); // Ma√ß b√∂l√ºm√ºne geri d√∂nerek se√ßenekleri g√∂ster
    };


    // Ma√ß sonu
    function endMatch() {
        if (!matchActive) return; // Ma√ß zaten bitmi≈üse tekrar √ßaƒüƒ±rma
        matchActive = false;
        clearInterval(matchInterval); // Zamanlayƒ±cƒ±yƒ± durdur
        window.removeEventListener("keydown", keyDownHandler);
        window.removeEventListener("keyup", keyUpHandler);
        
        let finalMsg = "";
        if (playerScore > botScore) {
            finalMsg = "Ma√ßƒ± KAZANDIN! üéâ";
            coin += 200; // Galibiyet √∂d√ºl√º
        } else if (botScore > playerScore) {
            finalMsg = "Ma√ßƒ± KAYBETTƒ∞N! üò©";
        } else {
            finalMsg = "Ma√ß BERABERE! ü§ù";
            coin += 50; // Beraberlik √∂d√ºl√º
        }
        updateCoin();
        matchMsg.textContent = finalMsg + " Tekrar denemek i√ßin Yeniden Ba≈ülat'a tƒ±kla.";
        matchArea.style.display = 'none'; // Ma√ß alanƒ±nƒ± gizle
        matchInfo.style.display = 'block'; // Bilgileri g√∂ster
        restartMatchBtn.style.display = 'block'; // Yeniden ba≈ülat butonunu g√∂ster
        power = 0; // Vuru≈ü g√ºc√ºn√º sƒ±fƒ±rla
        updatePowerBar();
    }


    // Pozisyon g√ºncelle
    function updatePositions() {
        playerEl.style.left = playerPos.x + "px";
        playerEl.style.top = playerPos.y + "px";
        botEl.style.left = botPos.x + "px";
        botEl.style.top = botPos.y + "px";
        ballEl.style.left = ballPos.x + "px";
        ballEl.style.top = ballPos.y + "px";
    }

    // Klavye tu≈ülarƒ±
    function keyDownHandler(e) {
        if(!matchActive) return;
        keysPressed[e.key.toLowerCase()] = true;
        if(e.key === " ") {
            e.preventDefault();
            startPowerCharge();
        }
    }
    function keyUpHandler(e) {
        if(!matchActive) return;
        keysPressed[e.key.toLowerCase()] = false;
        if(e.key === " ") {
            stopPowerCharge();
        }
    }

    // Power ≈üarj mekanizmasƒ±
    function startPowerCharge() {
        if(powerIncreasing) return;
        powerIncreasing = true;
        power = 0;
        let incPower = () => {
            if(!powerIncreasing) return;
            power += 2; // Daha hƒ±zlƒ± ≈üarj
            if(power > 100) power = 0; // %100'√º ge√ßerse sƒ±fƒ±rla
            updatePowerBar();
            setTimeout(incPower, 20); // Daha hƒ±zlƒ± g√ºncelleme
        };
        incPower();
    }
    function stopPowerCharge() {
        if(!powerIncreasing) return;
        powerIncreasing = false;
        shootBall(power);
        power = 0;
        updatePowerBar();
    }

    // Topu vurma i≈ülemi
    function shootBall(power) {
        const playerRatingAvg = currentMatchMode === '11v11' && first11.length > 0
            ? first11.reduce((a,b) => a + b.rating, 0) / first11.length
            : 80; // 1v1 veya takƒ±m yoksa varsayƒ±lan rating

        const shotPower = (power / 100) * ballSpeedFactor * (1 + (playerRatingAvg - 70) / 100); // Rating etki etsin
        
        // Oyuncudan topa doƒüru y√∂n
        const dx = ballPos.x - playerPos.x;
        const dy = ballPos.y - playerPos.y;
        const dist = Math.sqrt(dx * dx + dy * dy);

        if (dist < playerWidth / 2 + ballWidth / 2 + 5) { // Top oyuncuya yakƒ±nsa vur
            ballVelocity.x = dx / dist * shotPower;
            ballVelocity.y = dy / dist * shotPower;
            matchMsg.textContent = `Vuru≈ü! G√º√ß: ${power.toFixed(0)}%.`;
        } else {
            matchMsg.textContent = "Topa uzaksƒ±n!";
        }
    }

    // Basit bot hareketi (topa yakla≈üma)
    function botMove() {
        if(!matchActive) return;

        const targetX = ballPos.x;
        const targetY = ballPos.y;

        const dx = targetX - botPos.x;
        const dy = targetY - botPos.y;
        const dist = Math.sqrt(dx*dx + dy*dy);

        if(dist > 5) { // Topa yeterince yakƒ±n deƒüilse hareket et
            botPos.x += (dx/dist) * botSpeed;
            botPos.y += (dy/dist) * botSpeed;
        }

        // Botun kendi sahasƒ±nda kalmasƒ±nƒ± saƒüla (basit√ße sahanƒ±n saƒü yarƒ±sƒ±)
        botPos.x = Math.max(matchAreaWidth / 2, Math.min(matchAreaWidth - playerWidth, botPos.x));
        botPos.y = Math.min(Math.max(0, botPos.y), matchAreaHeight - playerWidth);

        updatePositions();
    }

    // √áarpƒ±≈üma kontrol√º (Basit √ßembersel √ßarpƒ±≈üma)
    function checkCollision(obj1Pos, obj1Size, obj2Pos, obj2Size) {
        const dx = obj1Pos.x - obj2Pos.x;
        const dy = obj1Pos.y - obj2Pos.y;
        const distance = Math.sqrt(dx * dx + dy * dy);
        return distance < (obj1Size / 2 + obj2Size / 2);
    }

    // Top hareketi
    function moveBall() {
        if (!matchActive) return;

        ballPos.x += ballVelocity.x;
        ballPos.y += ballVelocity.y;

        // Topun sahadan √ßƒ±kmasƒ±nƒ± engelle ve sekme efekti ver
        if (ballPos.x <= 0 || ballPos.x + ballWidth >= matchAreaWidth) {
            ballVelocity.x *= -1; // X y√∂n√ºn√º tersine √ßevir
            if (ballPos.x <= 0) ballPos.x = 0;
            if (ballPos.x + ballWidth >= matchAreaWidth) ballPos.x = matchAreaWidth - ballWidth;
            // checkGoal(); // Gol kontrol√ºn√º burada √ßaƒüƒ±rma, sadece pozisyon deƒüi≈ütiƒüinde
        }
        if (ballPos.y <= 0 || ballPos.y + ballWidth >= matchAreaHeight) {
            ballVelocity.y *= -1; // Y y√∂n√ºn√º tersine √ßevir
            if (ballPos.y <= 0) ballPos.y = 0;
            if (ballPos.y + ballWidth >= matchAreaHeight) ballPos.y = matchAreaHeight - ballWidth;
        }

        // S√ºrt√ºnme ile yava≈ülama
        ballVelocity.x *= 0.98;
        ballVelocity.y *= 0.98;

        // Hƒ±z √ßok d√º≈üerse durdur
        if (Math.abs(ballVelocity.x) < 0.1) ballVelocity.x = 0;
        if (Math.abs(ballVelocity.y) < 0.1) ballVelocity.y = 0;

        // Oyuncu ile top √ßarpƒ±≈ümasƒ±
        if (checkCollision(playerPos, playerWidth, ballPos, ballWidth)) {
            // Basit bir itme kuvveti
            const angle = Math.atan2(ballPos.y - playerPos.y, ballPos.x - playerPos.x);
            ballVelocity.x = Math.cos(angle) * (ballSpeedFactor * 0.7); // Oyuncudan aldƒ±ƒüƒ± ivme
            ballVelocity.y = Math.sin(angle) * (ballSpeedFactor * 0.7);
        }

        // Bot ile top √ßarpƒ±≈ümasƒ±
        if (checkCollision(botPos, playerWidth, ballPos, ballWidth)) {
            const angle = Math.atan2(ballPos.y - botPos.y, ballPos.x - botPos.x);
            ballVelocity.x = Math.cos(angle) * (ballSpeedFactor * 0.6); // Botun ivmesi
            ballVelocity.y = Math.sin(angle) * (ballSpeedFactor * 0.6);
        }

        updatePositions();
    }

    // Ana oyun d√∂ng√ºs√º
    let gameLoopActive = false; // D√∂ng√ºn√ºn sadece bir kez ba≈ülamasƒ± i√ßin
    function gameLoop() {
        if(!matchActive) {
             gameLoopActive = false;
             return;
        }
        
        // PC hareket
        let moveX = 0;
        let moveY = 0;

        // W A S D veya ok tu≈ülarƒ± kontrol√º
        if(keysPressed["w"] || keysPressed["arrowup"]) moveY -= playerSpeed;
        if(keysPressed["s"] || keysPressed["arrowdown"]) moveY += playerSpeed;
        if(keysPressed["a"] || keysPressed["arrowleft"]) moveX -= playerSpeed;
        if(keysPressed["d"] || keysPressed["arrowright"]) moveX += playerSpeed;

        // Oyuncu pozisyonu g√ºncelle
        playerPos.x = Math.min(Math.max(0, playerPos.x + moveX), matchAreaWidth - playerWidth);
        playerPos.y = Math.min(Math.max(0, playerPos.y + moveY), matchAreaHeight - playerWidth);
        
        // Oyuncunun kendi sahasƒ±nda kalmasƒ±nƒ± saƒüla (basit√ße sahanƒ±n sol yarƒ±sƒ±)
        playerPos.x = Math.min(matchAreaWidth / 2 - playerWidth, Math.max(0, playerPos.x));

        botMove(); // Botu hareket ettir
        moveBall(); // Topu hareket ettir
        checkGoal(); // Gol var mƒ± kontrol et

        requestAnimationFrame(gameLoop);
    }

    // Joystick hareketi
    let joystickActive = false;
    let joystickCenter = {x: 0, y: 0};
    let joystickPos = {x: 0, y: 0};

    joystickContainer.addEventListener("pointerdown", (e) => {
        if (!matchActive) return;
        e.preventDefault();
        joystickActive = true;
        const rect = joystickContainer.getBoundingClientRect();
        joystickCenter = {x: rect.width / 2, y: rect.height / 2};
        moveJoystick(e);
    });
    window.addEventListener("pointerup", (e) => {
        if (!matchActive) return;
        e.preventDefault();
        joystickActive = false;
        joystick.style.left = joystickCenter.x - joystick.clientWidth/2 + "px";
        joystick.style.top = joystickCenter.y - joystick.clientHeight/2 + "px";
        joystickPos = {x: 0, y: 0};
    });
    window.addEventListener("pointermove", (e) => {
        if(!joystickActive || !matchActive) return;
        e.preventDefault();
        moveJoystick(e);
    });

    function moveJoystick(e) {
        const rect = joystickContainer.getBoundingClientRect();
        let x = e.clientX - rect.left;
        let y = e.clientY - rect.top;
        const maxDistance = joystickContainer.clientWidth/2;
        let dx = x - maxDistance;
        let dy = y - maxDistance;

        const dist = Math.sqrt(dx*dx + dy*dy);
        if(dist > maxDistance) {
            dx = dx * maxDistance / dist;
            dy = dy * maxDistance / dist;
        }

        joystick.style.left = (maxDistance + dx - joystick.clientWidth/2) + "px";
        joystick.style.top = (maxDistance + dy - joystick.clientHeight/2) + "px";
        joystickPos = {x: dx / maxDistance, y: dy / maxDistance};
    }

    // Joystickla oyuncu hareketi d√∂ng√ºs√º
    function joystickLoop() {
        if(!matchActive) {
            return;
        }
        playerPos.x += joystickPos.x * playerSpeed;
        playerPos.y += joystickPos.y * playerSpeed;

        // Sƒ±nƒ±rlar
        playerPos.x = Math.min(Math.max(0, playerPos.x), matchAreaWidth - playerWidth);
        playerPos.y = Math.min(Math.max(0, playerPos.y), matchAreaHeight - playerWidth);
        
        // Oyuncunun kendi sahasƒ±nda kalmasƒ±nƒ± saƒüla (basit√ße sahanƒ±n sol yarƒ±sƒ±)
        playerPos.x = Math.min(matchAreaWidth / 2 - playerWidth, Math.max(0, playerPos.x));

        requestAnimationFrame(joystickLoop);
    }

    // Mobil ise joystick ve vur butonunu g√∂ster, deƒüilse gizle
    function updateControlsVisibility() {
        const isMobile = /Android|iPhone|iPad|iPod|Opera Mini|IEMobile|WPDesktop/i.test(navigator.userAgent);
        if(isMobile) {
            joystickContainer.style.display = "block";
            kickBtn.style.display = "block";
        } else {
            joystickContainer.style.display = "none";
            kickBtn.style.display = "none";
        }
    }

    kickBtn.addEventListener("touchstart", (e) => {
        if (!matchActive) return;
        e.preventDefault();
        startPowerCharge();
    });
    kickBtn.addEventListener("touchend", (e) => {
        if (!matchActive) return;
        e.preventDefault();
        stopPowerCharge();
    });
    // Mobil dƒ±≈üƒ±ndaki cihazlar i√ßin click event'i
    if (!/Android|iPhone|iPad|iPod|Opera Mini|IEMobile|WPDesktop/i.test(navigator.userAgent)) {
        kickBtn.addEventListener("mousedown", (e) => {
            if (!matchActive) return;
            e.preventDefault();
            startPowerCharge();
        });
        kickBtn.addEventListener("mouseup", (e) => {
            if (!matchActive) return;
            e.preventDefault();
            stopPowerCharge();
        });
    }


    // Tema deƒüi≈ütirme
    themeRadios.forEach(radio => {
        radio.addEventListener("change", () => {
            if(radio.checked) {
                if(radio.value === "dark") {
                    document.body.style.background = "#121212";
                    document.body.style.color = "#eee";
                    // Diƒüer elementlerin arka plan ve renklerini de g√ºncelleyebiliriz
                } else if(radio.value === "light") {
                    document.body.style.background = "#eee";
                    document.body.style.color = "#121212";
                } else { // Default
                    document.body.style.background = "#121212";
                    document.body.style.color = "#eee";
                }
            }
        });
    });

    // Ba≈ülangƒ±√ß i≈ülemleri
    function initializeGame() {
        updateCoin();
        updateControlsVisibility();
        updateRosterLists(); // Oyuncularƒ± g√ºncelleyince selectbox da g√ºncellenecek
        showSection("roster"); // Ba≈ülangƒ±√ßta kadro b√∂l√ºm√ºn√º g√∂ster

        // ƒ∞lk defa √ßaƒürƒ±lacak oyun d√∂ng√ºleri
        startGameLoops();
    }
    
    function startGameLoops() {
        if (!gameLoopActive) { // Sadece bir kez ba≈ülat
            requestAnimationFrame(gameLoop);
            requestAnimationFrame(joystickLoop);
            gameLoopActive = true;
        }
    }

    initializeGame();

})();
</script>

</body>
</html>
