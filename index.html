<!DOCTYPE html>
<html lang="tr">
<head>
<meta charset="UTF-8" />
<title>SoccerTR - Görevli & Bilgili</title>
<style>
  /* Reset ve genel stil */
  * {
    box-sizing: border-box;
  }
  body {
    margin: 0; padding: 0;
    background: linear-gradient(135deg, #1e3c34, #13562b);
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    color: #e0f2f1;
    display: flex;
    flex-direction: column;
    min-height: 100vh;
    align-items: center;
  }
  header {
    width: 100%;
    background: #0a2e21;
    text-align: center;
    padding: 18px 0;
    font-size: 2.5rem;
    font-weight: 900;
    letter-spacing: 3px;
    color: #a3f7bf;
    text-shadow: 0 0 8px #38ef7d;
    box-shadow: 0 3px 15px #0a2e2150;
  }
  #coinDisplay {
    margin: 15px 0;
    background: #2a6b37;
    border-radius: 50px;
    padding: 8px 25px;
    font-weight: 800;
    font-size: 1.4rem;
    box-shadow: 0 0 10px #2a6b37aa;
    user-select: none;
  }
  #menu {
    display: flex;
    gap: 18px;
    margin-bottom: 25px;
  }
  #menu button {
    background: #2a6b37;
    border: none;
    padding: 12px 28px;
    border-radius: 50px;
    font-weight: 700;
    font-size: 1.1rem;
    color: #c8e6c9;
    cursor: pointer;
    box-shadow: 0 0 12px #2a6b37aa;
    transition: all 0.3s ease;
    user-select: none;
  }
  #menu button:hover {
    background: #38ef7d;
    color: #064321;
    box-shadow: 0 0 20px #38ef7d;
  }
  #menu button.active {
    background: #38ef7d;
    color: #064321;
    box-shadow: 0 0 20px #38ef7d;
  }

  main {
    width: 95%;
    max-width: 1100px;
    flex: 1;
  }

  /* Bölümler */
  section {
    background: rgba(10, 46, 33, 0.85);
    border-radius: 14px;
    padding: 20px 25px;
    margin-bottom: 35px;
    box-shadow: 0 0 20px #17d24a55;
    min-height: 280px;
  }
  section h2 {
    margin-top: 0;
    font-weight: 900;
    font-size: 1.8rem;
    letter-spacing: 1.5px;
    color: #9dfeb3;
    border-bottom: 3px solid #38ef7d;
    padding-bottom: 7px;
    user-select: none;
  }

  /* Liste stilleri */
  ul {
    list-style: none;
    padding: 0;
    max-height: 270px;
    overflow-y: auto;
  }
  li {
    background: #17532b;
    margin-bottom: 10px;
    padding: 14px 18px;
    border-radius: 14px;
    box-shadow: inset 0 0 6px #2ecc71aa;
    display: flex;
    justify-content: space-between;
    align-items: center;
    font-weight: 600;
    font-size: 1.1rem;
    cursor: default;
    user-select: none;
    transition: background 0.3s;
  }
  li:hover {
    background: #2ecc7155;
  }

  /* Butonlar */
  button.actionBtn {
    background: #1a4423;
    border: none;
    color: #a3f7bf;
    font-weight: 700;
    padding: 6px 12px;
    margin-left: 8px;
    border-radius: 12px;
    cursor: pointer;
    transition: background 0.3s ease;
    box-shadow: 0 0 8px #0e2d17;
    user-select: none;
  }
  button.actionBtn:hover:not(:disabled) {
    background: #38ef7d;
    color: #064321;
    box-shadow: 0 0 14px #38ef7d;
  }
  button.actionBtn:disabled {
    background: #0a1b0e;
    color: #375c35;
    cursor: not-allowed;
  }

  /* Paket Aç bölümü */
  #packSection {
    background: rgba(10, 46, 33, 0.9);
    border-radius: 14px;
    padding: 20px 25px;
    margin-bottom: 40px;
    box-shadow: 0 0 22px #20d46e99;
    max-width: 1100px;
  }
  #packSection p {
    font-size: 1.1rem;
    font-weight: 600;
    user-select: none;
    margin-bottom: 10px;
  }
  #packSection button {
    width: 180px;
    font-size: 1.1rem;
    font-weight: 700;
  }
  #packMessage {
    margin-top: 12px;
    font-style: italic;
    color: #a3f7bf;
    min-height: 24px;
  }

  /* Mesaj kutuları */
  .message {
    margin-top: 12px;
    font-style: italic;
    color: #b6e1b7;
    min-height: 24px;
  }

  /* Antrenman kontrol */
  #trainingControls {
    margin-top: 18px;
    display: flex;
    align-items: center;
    gap: 15px;
  }
  select#trainingSelect {
    font-size: 1rem;
    padding: 6px 12px;
    border-radius: 8px;
    border: none;
    background: #2a6b37;
    color: #d1f6ce;
    user-select: none;
  }

  /* Görev listesi */
  #missionsSection ul {
    max-height: 150px;
  }
  #missionsSection li {
    display: flex;
    justify-content: space-between;
    padding-right: 15px;
    user-select: none;
  }
  #missionsSection li.completed {
    text-decoration: line-through;
    opacity: 0.7;
  }
  #missionsSection li span.reward {
    font-weight: 700;
    color: #c7f2b0;
  }
</style>
</head>
<body>

<header>SoccerTR</header>

<div id="coinDisplay">Coin: <span id="coinCount">100</span></div>

<div id="menu">
  <button id="menuPlayers" class="active">Oyuncular</button>
  <button id="menuLineup">Kadro</button>
  <button id="menuTraining">Antrenman</button>
  <button id="menuMissions">Görevler</button>
</div>

<div id="packSection">
  <h2>Paket Aç</h2>
  <p>100 Coin karşılığında yeni bir oyuncu kazan.</p>
  <button id="openPackBtn">Paket Aç (100 Coin)</button>
  <div class="message" id="packMessage"></div>
</div>

<main>
  <section class="section" id="playersSection">
    <h2>Oyuncularınız</h2>
    <ul id="playersList"></ul>
  </section>

  <section class="section" id="lineupSection" style="display:none;">
    <h2>Kadro Yönetimi</h2>

    <div>
      <strong>İlk 11</strong>
      <ul id="first11List"></ul>
    </div>

    <div>
      <strong>Yedek 11</strong>
      <ul id="substitutesList"></ul>
    </div>

    <div>
      <strong>Kadro Dışı</strong>
      <ul id="outsideList"></ul>
    </div>

    <button id="increaseOutsideBtn">Kadro Dışı +100 Coin</button>
    <div class="message" id="lineupMessage"></div>
  </section>

  <section class="section" id="trainingSection" style="display:none;">
    <h2>Antrenman</h2>
    <p>Oyuncu seçip antrenman yaparak güçlendirin.</p>

    <div id="trainingControls">
      <select id="trainingSelect">
        <option value="">Oyuncu Seç</option>
      </select>
      <button id="trainBtn" disabled>Antrenman Yap (+10 coin)</button>
    </div>
    <div class="message" id="trainingMessage"></div>
  </section>

  <section class="section" id="missionsSection" style="display:none;">
    <h2>Görevler</h2>
    <ul id="missionsList"></ul>
    <div class="message" id="missionsMessage"></div>
  </section>
</main>

<script>
  class Player {
    constructor(id, name, rating, status) {
      this.id = id;
      this.name = name;
      this.rating = rating; // 0-100 arası güç
      this.status = status; // "outside", "first11", "substitute"
      this.goals = 0;      // Gol sayısı
      this.assists = 0;    // Asist sayısı
    }
  }

  // Başlangıç coin
  let coin = 100;
  let maxOutside = 500;

  // Oyuncu havuzu: bütün oyuncular burada ama henüz hiçbiri kadroya eklenmedi
  const playerPool = [
    "Mbappé", "Ronaldo", "Messi", "Neymar", "Lewandowski",
    "Salah", "De Bruyne", "Kante", "Benzema", "Modric",
    "Hazard", "Alaba", "Kimmich", "Sancho", "Foden",
    "Gavi", "Rashford", "Verratti", "Haaland", "Sterling",
    "Son", "Casemiro", "Cancelo"
  ];

  // Oyuncular dizisi (şu anda boş)
  const players = [];

  // ID sayaç
  let nextId = 1;

  // Görevler
  const missions = [
    { id: 1, text: "10 Gol At", goal: 10, assist: 0, reward: 100, completed: false },
    { id: 2, text: "3 Asist Yap", goal: 0, assist: 3, reward: 50, completed: false }
  ];

  // Coin göstergesi güncelleme
  function updateCoins() {
    document.getElementById('coinCount').innerText = coin;
  }

  // Tüm listeleri ve antrenman dropdownunu güncelle
  function updateLists() {
    const playersList = document.getElementById('playersList');
    const first11List = document.getElementById('first11List');
    const subsList = document.getElementById('substitutesList');
    const outsideList = document.getElementById('outsideList');
    const trainingSelect = document.getElementById('trainingSelect');

    playersList.innerHTML = '';
    first11List.innerHTML = '';
    subsList.innerHTML = '';
    outsideList.innerHTML = '';
    trainingSelect.innerHTML = '<option value="">Oyuncu Seç</option>';

    if(players.length === 0) {
      playersList.innerHTML = '<li>Kadro boş. Paket açarak oyuncu kazanabilirsin!</li>';
    } else {
      players.forEach(p => {
        // Oyuncular sekmesi: İsim, Rating, Gol, Asist, Durum
        const liAll = document.createElement('li');
        liAll.innerHTML = `
          <div>
            <strong>${p.name}</strong> | Rating: ${p.rating} | Gol: ${p.goals} | Asist: ${p.assists} | Durum: ${p.status}
          </div>
        `;
        playersList.appendChild(liAll);

        // Kadro bölümleri için liste elemanı oluştur
        function createKadroItem(player) {
          const li = document.createElement('li');
          li.innerHTML = `
            <div><strong>${player.name}</strong> | Rating: ${player.rating} | Gol: ${player.goals} | Asist: ${player.assists}</div>
          `;

          // Hareket butonları
          const btnFirst11 = document.createElement('button');
          btnFirst11.textContent = "İlk 11'e";
          btnFirst11.className = "actionBtn";
          btnFirst11.disabled = player.status === "first11";
          btnFirst11.onclick = () => changeStatus(player.id, "first11");

          const btnSub = document.createElement('button');
          btnSub.textContent = "Yedek 11'e";
          btnSub.className = "actionBtn";
          btnSub.disabled = player.status === "substitute";
          btnSub.onclick = () => changeStatus(player.id, "substitute");

          const btnOut = document.createElement('button');
          btnOut.textContent = "Kadro Dışı";
          btnOut.className = "actionBtn";
          btnOut.disabled = player.status === "outside";
          btnOut.onclick = () => changeStatus(player.id, "outside");

          li.appendChild(btnFirst11);
          li.appendChild(btnSub);
          li.appendChild(btnOut);

          return li;
        }

        if(p.status === "first11") first11List.appendChild(createKadroItem(p));
        else if(p.status === "substitute") subsList.appendChild(createKadroItem(p));
        else if(p.status === "outside") outsideList.appendChild(createKadroItem(p));

        // Antrenman dropdown (ilk 11 ve yedek)
        if(p.status === "first11" || p.status === "substitute") {
          const option = document.createElement('option');
          option.value = p.id;
          option.textContent = `${p.name} (Rating: ${p.rating})`;
          trainingSelect.appendChild(option);
        }
      });
    }

    // Kadro dışı artırma butonu kontrolü
    document.getElementById('increaseOutsideBtn').disabled = maxOutside >= 1000 || coin < 100;
  }

  // Oyuncu durumunu değiştir
  function changeStatus(playerId, newStatus) {
    const player = players.find(p => p.id === playerId);
    if (!player) return;

    // Kadro dışı sınır kontrolü
    if(newStatus === "outside" && countStatus("outside") >= maxOutside) {
      document.getElementById('lineupMessage').innerText = "Kadro dışı limiti dolu!";
      return;
    }

    // İlk 11 sınır 11 kişi
    if(newStatus === "first11" && countStatus("first11") >= 11) {
      document.getElementById('lineupMessage').innerText = "İlk 11 dolu!";
      return;
    }

    // Yedek sınır 11 kişi
    if(newStatus === "substitute" && countStatus("substitute") >= 11) {
      document.getElementById('lineupMessage').innerText = "Yedek 11 dolu!";
      return;
    }

    player.status = newStatus;
    document.getElementById('lineupMessage').innerText = `${player.name} ${newStatus} olarak ayarlandı.`;
    updateLists();
  }

  // Statü sayısı
  function countStatus(status) {
    return players.filter(p => p.status === status).length;
  }

  // Kadro dışı artırma
  document.getElementById('increaseOutsideBtn').addEventListener('click', () => {
    if(coin < 100) {
      document.getElementById('lineupMessage').innerText = "Yeterli coin yok.";
      return;
    }
    if(maxOutside >= 1000) {
      document.getElementById('lineupMessage').innerText = "Kadro dışı limiti maksimum.";
      return;
    }
    coin -= 100;
    maxOutside += 100;
    document.getElementById('lineupMessage').innerText = `Kadro dışı limiti +100 oldu: ${maxOutside}`;
    updateCoins();
    updateLists();
  });

  // Antrenman sistemi
  const trainBtn = document.getElementById('trainBtn');
  const trainingSelect = document.getElementById('trainingSelect');
  const trainingMessage = document.getElementById('trainingMessage');

  trainingSelect.addEventListener('change', () => {
    trainBtn.disabled = trainingSelect.value === "";
    trainingMessage.innerText = '';
  });

  trainBtn.addEventListener('click', () => {
    const pid = parseInt(trainingSelect.value);
    if(isNaN(pid)) return;

    if(coin < 10) {
      trainingMessage.innerText = "Antrenman yapmak için 10 coin gerekli.";
      return;
    }

    const player = players.find(p => p.id === pid);
    if(!player) return;

    // Antrenman gücü artırır ve %10 ihtimalle gol ya da asist ekler
    player.rating += Math.floor(Math.random() * 5) + 1;
    if(player.rating > 100) player.rating = 100;

    // Görevler için gol ve asist ekleyelim random
    // %30 gol, %20 asist
    let golAdded = 0, assistAdded = 0;
    let rand = Math.random();
    if(rand < 0.3) {
      player.goals++;
      golAdded = 1;
    } else if(rand < 0.5) {
      player.assists++;
      assistAdded = 1;
    }

    coin -= 10;

    trainingMessage.innerHTML = `${player.name} antrenman yaptı! Rating: ${player.rating}` +
      (golAdded ? ' ⚽ Gol attı!' : '') +
      (assistAdded ? ' 🎯 Asist yaptı!' : '');

    updateCoins();
    updateLists();
    checkMissions();
  });

  // Paket açma sistemi
  const openPackBtn = document.getElementById('openPackBtn');
  const packMessage = document.getElementById('packMessage');

  openPackBtn.addEventListener('click', () => {
    if(coin < 100) {
      packMessage.innerText = "Yeterli coin yok!";
      return;
    }

    // Paket açma 100 coin düş
    coin -= 100;

    // Havuzda henüz olmayan oyuncuları bul
    const availablePlayers = playerPool.filter(name => !players.some(p => p.name === name));
    if(availablePlayers.length === 0) {
      packMessage.innerText = "Tüm oyuncular zaten var!";
      updateCoins();
      return;
    }

    // Rastgele bir oyuncu seç
    const randomIndex = Math.floor(Math.random() * availablePlayers.length);
    const newPlayerName = availablePlayers[randomIndex];

    // Yeni oyuncu oluştur, kadro dışı olarak ekle
    const newPlayer = new Player(nextId++, newPlayerName, Math.floor(Math.random() * 40) + 60, "outside");
    players.push(newPlayer);

    packMessage.innerText = `${newPlayerName} kadrona katıldı!`;
    updateCoins();
    updateLists();
  });

  // Menü butonları ve görünürlük kontrolü
  const menuPlayersBtn = document.getElementById('menuPlayers');
  const menuLineupBtn = document.getElementById('menuLineup');
  const menuTrainingBtn = document.getElementById('menuTraining');
  const menuMissionsBtn = document.getElementById('menuMissions');

  const playersSection = document.getElementById('playersSection');
  const lineupSection = document.getElementById('lineupSection');
  const trainingSection = document.getElementById('trainingSection');
  const missionsSection = document.getElementById('missionsSection');

  function showSection(section) {
    playersSection.style.display = 'none';
    lineupSection.style.display = 'none';
    trainingSection.style.display = 'none';
    missionsSection.style.display = 'none';

    menuPlayersBtn.classList.remove('active');
    menuLineupBtn.classList.remove('active');
    menuTrainingBtn.classList.remove('active');
    menuMissionsBtn.classList.remove('active');

    if(section === 'players') {
      playersSection.style.display = 'block';
      menuPlayersBtn.classList.add('active');
    } else if(section === 'lineup') {
      lineupSection.style.display = 'block';
      menuLineupBtn.classList.add('active');
    } else if(section === 'training') {
      trainingSection.style.display = 'block';
      menuTrainingBtn.classList.add('active');
    } else if(section === 'missions') {
      missionsSection.style.display = 'block';
      menuMissionsBtn.classList.add('active');
    }
  }

  menuPlayersBtn.onclick = () => showSection('players');
  menuLineupBtn.onclick = () => showSection('lineup');
  menuTrainingBtn.onclick = () => showSection('training');
  menuMissionsBtn.onclick = () => showSection('missions');

  // Görevleri güncelle ve göster
  function updateMissionsUI() {
    const missionsList = document.getElementById('missionsList');
    missionsList.innerHTML = '';
    missions.forEach(m => {
      const li = document.createElement('li');
      li.textContent = m.text;
      if(m.completed) li.classList.add('completed');

      const progress = document.createElement('span');
      progress.style.fontWeight = "bold";
      progress.style.marginLeft = "10px";
      progress.style.color = m.completed ? "#a3f7bf" : "#d1f6ce";

      // Progress göster
      // toplam gol ya da asist olarak hesaplayacağız:
      let currentProgress = 0;
      if(m.goal > 0) currentProgress = totalGoals();
      else if(m.assist > 0) currentProgress = totalAssists();

      // Yüzde
      let progressText = `${Math.min(currentProgress,m.goal||m.assist)}/${m.goal||m.assist}`;
      if(m.completed) progressText = "Tamamlandı!";

      progress.textContent = progressText + " (+" + m.reward + " coin)";
      progress.className = "reward";

      li.appendChild(progress);
      missionsList.appendChild(li);
    });
  }

  // Toplam gol sayısı
  function totalGoals() {
    return players.reduce((acc, p) => acc + p.goals, 0);
  }
  // Toplam asist sayısı
  function totalAssists() {
    return players.reduce((acc, p) => acc + p.assists, 0);
  }

  // Görev kontrolü ve ödül verme
  function checkMissions() {
    missions.forEach(m => {
      if(!m.completed) {
        if(m.goal > 0 && totalGoals() >= m.goal) {
          m.completed = true;
          coin += m.reward;
          document.getElementById('missionsMessage').innerText = `Görev tamamlandı: ${m.text}. +${m.reward} coin kazandınız!`;
        } else if(m.assist > 0 && totalAssists() >= m.assist) {
          m.completed = true;
          coin += m.reward;
          document.getElementById('missionsMessage').innerText = `Görev tamamlandı: ${m.text}. +${m.reward} coin kazandınız!`;
        }
      }
    });
    updateCoins();
    updateMissionsUI();
  }

  // Başlangıç ayarları
  updateCoins();
  updateLists();
  updateMissionsUI();
  showSection('players');
</script>

</body>
</html>
